<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: mtl-parser.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: mtl-parser.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// ===== mtl-parser.mjs ==========================================================
// A simple MTL parser
// Taken from https://webglfundamentals.org/webgl/lessons/webgl-load-obj-w-mtl.html
// Ben Coleman, 2023
// ===============================================================================

/**
 * Parse an MTL file returning a map of materials
 * Results should be passed new Material() to create a material
 *
 * @param {string} mtlFileString - MTL file contents
 * @returns {Map&lt;string, object>} - Parsed MTL data as a dictionary of materials
 */
export function parseMTL(mtlFileString) {
  const materials = new Map()
  let material

  const keywords = {
    newmtl(_, unparsedArgs) {
      material = {}
      materials[unparsedArgs] = material
    },

    Ns(parts) {
      material.ns = parseFloat(parts[0])
    },
    Ka(parts) {
      material.ka = parts.map(parseFloat)
    },
    Kd(parts) {
      material.kd = parts.map(parseFloat)
    },
    Ks(parts) {
      material.ks = parts.map(parseFloat)
    },
    Ke(parts) {
      material.ke = parts.map(parseFloat)
    },
    Ni(parts) {
      material.ni = parseFloat(parts[0])
    },
    d(parts) {
      material.d = parseFloat(parts[0])
    },
    illum(parts) {
      material.illum = parseInt(parts[0])
    },
  }

  const keywordRE = /(\w*)(?: )*(.*)/
  const lines = mtlFileString.split('\n')

  for (let lineNo = 0; lineNo &lt; lines.length; ++lineNo) {
    const line = lines[lineNo].trim()
    if (line === '' || line.startsWith('#')) {
      continue
    }

    const m = keywordRE.exec(line)
    if (!m) {
      continue
    }

    const [, keyword, unparsedArgs] = m
    const parts = line.split(/\s+/).slice(1)

    const handler = keywords[keyword]
    if (!handler) {
      console.warn('unhandled keyword:', keyword)
      continue
    }

    handler(parts, unparsedArgs)
  }

  return materials
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Instance.html">Instance</a></li><li><a href="Material.html">Material</a></li><li><a href="Model.html">Model</a></li><li><a href="Part.html">Part</a></li><li><a href="Sprite.html">Sprite</a></li><li><a href="Tile.html">Tile</a></li><li><a href="Zone.html">Zone</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addModel">addModel</a></li><li><a href="global.html#bindControls">bindControls</a></li><li><a href="global.html#buildScene">buildScene</a></li><li><a href="global.html#fetchFile">fetchFile</a></li><li><a href="global.html#fetchShaders">fetchShaders</a></li><li><a href="global.html#getGl">getGl</a></li><li><a href="global.html#gl">gl</a></li><li><a href="global.html#glContext">glContext</a></li><li><a href="global.html#hideOverlay">hideOverlay</a></li><li><a href="global.html#parseMTL">parseMTL</a></li><li><a href="global.html#parseOBJ">parseOBJ</a></li><li><a href="global.html#renderInstance">renderInstance</a></li><li><a href="global.html#renderSprite">renderSprite</a></li><li><a href="global.html#setOverlay">setOverlay</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Mar 04 2023 16:22:16 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
